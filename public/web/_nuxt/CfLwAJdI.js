import{_ as P}from"./C8CK8nAU.js";import{d as M,b as S,f as B,g as F,aK as Q,i as A,c as s,o as n,p as l,F as x,B as y,l as g,m as a,_ as I,t as p,x as $,n as E}from"#entry";import{h as G}from"./CaCT6lpU.js";import{L as k}from"./RwoEbaX4.js";import"./-aacq5Xj.js";const N={class:"micropage-provider flex h-full flex-col"},O={key:0,class:"flex flex-none flex-wrap gap-3 p-6"},V={key:1,class:"flex flex-1 items-center justify-center"},j={class:"mx-auto max-w-sm text-center"},q={class:"text-foreground mb-2 text-lg font-semibold"},z={class:"text-muted-foreground text-sm"},K={key:2,class:"flex-1 overflow-y-auto p-6"},R={class:"flex flex-wrap gap-3"},U=["onClick"],D={class:"min-w-0 flex-1"},T={class:"text-foreground mb-1 flex items-center truncate text-base font-semibold"},H={key:0,class:"absolute top-0 right-0 flex-none"},ee=M({__name:"micropage-provider",props:{searchQuery:{default:""},selected:{default:null}},emits:["select"],setup(d,{emit:v}){const{t:c}=S(),i=d,w=v,m=B([]),f=F(()=>{if(!i.searchQuery)return m.value;const e=i.searchQuery.toLowerCase();return m.value.filter(o=>o.name?.toLowerCase().includes(e)||o.path?.toLowerCase().includes(e))}),{lockFn:b,isLock:C}=Q(async()=>{try{const o=(await G()).map(r=>({type:k.MICROPAGE,name:r.name,path:`/micropage/${r.id}`,query:{}}));o.sort((r,u)=>{const t=r.name||"",_=u.name||"";return t.localeCompare(_)}),m.value=o}catch(e){console.error(c("console-common.loadingFailed"),e),m.value=[]}}),L=e=>{w("select",e)},h=e=>i.selected?.path===e.path&&i.selected?.type===k.MICROPAGE;return A(()=>b()),(e,o)=>{const r=P,u=I;return n(),s("div",N,[l(C)?(n(),s("div",O,[(n(),s(x,null,y(6,t=>g(r,{class:"h-18 w-44 rounded-xl",key:t})),64))])):f.value.length===0?(n(),s("div",V,[a("div",j,[g(u,{name:"i-heroicons-document-text",class:"text-muted-foreground/50 mx-auto mb-4 h-16 w-16"}),a("h3",q,p(d.searchQuery?l(c)("console-common.linkPicker.emptyState.noMatchingPages"):l(c)("console-common.linkPicker.emptyState.noMicropages")),1),a("p",z,p(d.searchQuery?l(c)("console-common.linkPicker.emptyState.tryOtherKeywords"):l(c)("console-common.linkPicker.emptyState.contactAdmin")),1)])])):(n(),s("div",K,[a("div",R,[(n(!0),s(x,null,y(f.value,t=>(n(),s("div",{key:t.path,class:$(["group relative flex cursor-pointer items-center gap-4 rounded-xl px-4 py-3 transition-all duration-200",h(t)?"bg-primary/5 shadow-sm":"bg-accent hover:bg-primary/5"]),onClick:_=>L(t)},[a("div",D,[a("div",T,p(t.name),1)]),h(t)?(n(),s("div",H,[...o[0]||(o[0]=[a("div",{class:"bg-primary flex size-3 items-center justify-center rounded-full"},null,-1)])])):E("",!0)],10,U))),128))])]))])}}});export{ee as default};

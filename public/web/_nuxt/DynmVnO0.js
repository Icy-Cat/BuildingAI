const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DHh83Pzz.js","./DChYRXkg.js","./BIwjuh_U.js","./CSSFs99L.js","./oCPB_vgJ.js","./DFBCXxNw.js","./BwjX1SxC.js","./Bub1HYiY.js","./B22A-h4k.js","./Bpk8zbrs.js","./XpsTG8vq.js","./-aacq5Xj.js","./BSAzea65.js","./_1k1KbFY.js","./BMSQkwth.js","./DaWZu8wl.js","./B564akus.js","./RgH6K5Ts.js","./B19A1O9i.js","./BaNg8fjw.js","./B1wqSa92.js","./BI1JbAYD.js","./BBNTTFau.js","./BZ582zsC.js","./2ydT-KR3.js","./Dn8X9Gvz.js","./8nwS_hHr.js","./BHGRVy27.js","./BIVu-AGc.js","./xli8Y-dU.js","./BaddN8Qc.js","./8-c-A7PB.js","./kRIii9yh.js","./Cfcu-t3n.js","./C6Y-ieo6.js","./b-_TUx9i.js","./DaNf1Wdt.js","./CKXZhss7.js","./Cpt2kRVT.js","./pUN2d83w.js","./DqVgEjI6.js","./Qjq6OWkd.js","./BT1VXOqk.js","./DlAUqK2U.js","./DILziS8N.js","./CjnkMdLn.js","./C1DLXs69.js","./B1XcE43x.js","./CWtbjjIF.js","./DqNHTeRY.js","./JDOkAPQ0.js","./CWb-zNEK.js","./D39yG5RA.js","./DodGX9aM.js","./BWWuJQeZ.js","./DN9ov8OT.js","./9bDOsXij.js","./iHyFjswr.js","./DDkKkiq3.js","./DScsE4CL.js","./BstbYvQo.js","./CP4Zo7YT.js"])))=>i.map(i=>d[i]);
import{d as X,aJ as Y,b as Z,s as k,R as d,e as ee,O as te,a1 as ae,g as E,aK as P,w as oe,H as ne,i as se,p as e,aa as ie,c as U,o as b,m as o,t as l,n as D,j as O,l as i,_ as le,k as v,q as x,z as ce,A as h,at as re,U as u,aq as C,aL as B}from"#entry";import{_ as de}from"./COzfqa7N.js";import{_ as ue}from"./DodGX9aM.js";import{_ as me}from"./DJ8q3BOv.js";import{a as fe,b as pe}from"./CWtbjjIF.js";const ge={class:"flex h-full min-h-0 flex-1 flex-col p-4"},_e={class:"flex items-center justify-between"},be={class:"text-foreground text-lg font-medium"},ve={class:"flex h-full min-h-0 flex-1 gap-4 pt-4 pr-4"},he={class:"flex h-full min-h-0 w-1/2 flex-none flex-col"},ke={key:0,class:"mb-4 rounded-lg border border-blue-200 bg-blue-50 p-4 text-blue-800 dark:border-blue-800 dark:bg-blue-900/30 dark:text-blue-200"},xe={class:"flex items-center justify-between"},Ce={class:"flex items-center gap-2"},we={class:"font-medium"},ye={class:"flex items-center gap-2"},Ie={class:"mt-1 text-sm opacity-80"},Ve={class:"mb-4 flex"},Ae={class:"flex h-full min-h-0 w-1/2 flex-none flex-col"},Re={class:"mb-4 flex items-center justify-end gap-3 p-0.5"},ze={class:"bg-muted border-default flex h-full min-h-0 w-full flex-col rounded-lg border"},Se={class:"flex items-center justify-between p-4"},$e={class:"text-foreground text-lg font-medium"},Ee={class:"flex items-center gap-2"},Le=X({__name:"index",setup(Pe){const F=d(()=>u(()=>import("./DHh83Pzz.js"),__vite__mapDeps([0,1,2]),import.meta.url)),T=d(()=>u(()=>import("./CSSFs99L.js"),__vite__mapDeps([3,1]),import.meta.url)),L=d(()=>u(()=>import("./oCPB_vgJ.js"),__vite__mapDeps([4,1,5,6,7,8,9,10,11]),import.meta.url)),j=d(()=>u(()=>import("./BSAzea65.js"),__vite__mapDeps([12,1,13,14,15,16,17,18,5,6,7,8,9,10,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,11,46,47,48,49]),import.meta.url)),M=d(()=>u(()=>import("./JDOkAPQ0.js"),__vite__mapDeps([50,1,51,18,11,52,29,30,31,32,6,33,34,35,36,37,38,39,8,7,41,42,25,43,47,53,54,55,56,57,58,5,9,10,59,60,61]),import.meta.url)),N=Y(),{t:c}=Z(),w=k(!1),m=N.params.id,f=ie("agents"),p=k("0"),y=[{value:"0",label:c("ai-agent.backend.configuration.func"),component:F},{value:"1",label:c("ai-agent.backend.configuration.user"),component:T},{value:"2",label:c("ai-agent.backend.configuration.billingSetup"),component:L}],I=ee("previewChatRef"),g=k(!0),_=te("agent-config-auto-save",{default:()=>!0}),t=ae({name:"",description:"",avatar:"",chatAvatar:"",rolePrompt:"",createMode:"direct",showContext:!0,showReference:!0,enableFeedback:!0,enableWebSearch:!1,billingConfig:{price:0},modelConfig:{id:"",options:{}},datasetIds:[],mcpServerIds:[],openingStatement:"你好，我是智能体默认开场白，你可以在界面配置中修改我",openingQuestions:["我打算去北京旅游，有什么推荐的路线吗？","预算大约2万，能帮我规划一下行程吗？","我对历史文化很感兴趣，有合适的目的地推荐吗？"],isPublic:!1,quickCommands:[],autoQuestions:{enabled:!1,customRuleEnabled:!1,customRule:""},formFields:[],formFieldsInputs:{},thirdPartyIntegration:{},tagIds:[]}),V=E(()=>t.createMode==="coze"),q=E(()=>t.thirdPartyIntegration?.coze?.botId),{lockFn:K,isLock:Q}=P(async()=>{const a=await fe(m),{id:n,createdAt:R,updatedAt:r,deletedAt:z,userCount:S,createdBy:$,conversationCount:s,provider:Ue,...G}=a;Object.assign(t,G),C().success(c("common.message.updateSuccess")),B(`agent-detail-${m}`)});function H(){if(!t.formFields||t.formFields.length===0){C().error(c("ai-agent.backend.configuration.variableInputDesc"));return}g.value=!g.value}const{lockFn:A,isLock:J}=P(async(a=!0)=>{await pe(m,t),a&&C().success(c("common.message.updateSuccess")),B(`agent-detail-${m}`)}),W=ne(()=>A(!1),1e3);return oe(()=>t,()=>{!w.value||!_.value||W()},{deep:!0}),se(()=>{Reflect.ownKeys({...t,tags:[]}).forEach(a=>{e(f)&&Object.prototype.hasOwnProperty.call(e(f),a)&&a!=="tags"&&(t[a]=e(f)?.[a]??t[a]),a==="tags"&&(t.tagIds=e(f)?.tags?.map(n=>n.id)??[])}),setTimeout(()=>{w.value=!0},1500)}),(a,n)=>{const R=le,r=ce,z=de,S=ue,$=me;return b(),U("div",ge,[o("div",_e,[o("h1",be,l(a.$t("ai-agent.backend.menu.arrange")),1)]),o("div",ve,[o("div",he,[e(V)?(b(),U("div",ke,[o("div",xe,[o("div",Ce,[i(R,{name:"i-lucide-bot",class:"h-5 w-5"}),o("span",we,l(a.$t("ai-agent.backend.configuration.coze.title"))+" (Bot ID: "+l(e(q))+")",1)]),o("div",ye,[i(r,{size:"xs",color:"primary",variant:"soft",loading:e(Q),onClick:e(K)},{default:v(()=>[x(l(a.$t("ai-agent.backend.configuration.coze.sync")),1)]),_:1},8,["loading","onClick"]),i(r,{size:"xs",color:"neutral",variant:"ghost",to:"https://www.coze.cn/",target:"_blank",icon:"i-lucide-external-link"},{default:v(()=>[x(l(a.$t("ai-agent.backend.configuration.coze.editInCoze")),1)]),_:1})])]),o("p",Ie,l(a.$t("ai-agent.backend.configuration.coze.readOnlyTip")),1)])):D("",!0),o("div",Ve,[i(z,{modelValue:e(p),"onUpdate:modelValue":n[0]||(n[0]=s=>h(p)?p.value=s:null),items:y,class:"block w-auto"},null,8,["modelValue"])]),(b(),O(re(y[Number(e(p))]?.component),{modelValue:e(t),"onUpdate:modelValue":n[1]||(n[1]=s=>h(t)?t.value=s:null)},null,8,["modelValue"]))]),o("div",Ae,[o("div",Re,[i(S,{modelValue:e(_),"onUpdate:modelValue":n[2]||(n[2]=s=>h(_)?_.value=s:null),disabled:e(V),label:e(c)("ai-agent.backend.configuration.enableAutoSave"),class:"flex-none"},null,8,["modelValue","disabled","label"]),e(t).createMode==="direct"?(b(),O(e(M),{key:0,modelValue:e(t).modelConfig,"onUpdate:modelValue":n[3]||(n[3]=s=>e(t).modelConfig=s)},null,8,["modelValue"])):D("",!0),i($,{codes:["ai-agent:update"]},{default:v(()=>[i(r,{trailingIcon:"i-lucide-arrow-big-up",color:"primary",size:"lg",class:"flex-none gap-1 px-4",disabled:e(J),onClick:e(A)},{default:v(()=>[x(l(a.$t("ai-agent.backend.configuration.saveConfig")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),o("div",ze,[o("div",Se,[o("h1",$e,l(a.$t("ai-agent.backend.configuration.debugPreview")),1),o("div",Ee,[i(r,{icon:"i-lucide-refresh-cw",color:"primary",variant:"ghost",onClick:n[4]||(n[4]=s=>e(I)?.clearRecord())}),i(r,{icon:"i-lucide-settings-2",color:"primary",variant:e(g)?"soft":"ghost",onClick:H},null,8,["variant"])])]),i(e(j),{agent:e(t),"onUpdate:agent":n[5]||(n[5]=s=>h(t)?t.value=s:null),ref_key:"previewChatRef",ref:I,"show-variable-input":e(g)},null,8,["agent","show-variable-input"])])])])])}}});export{Le as _};

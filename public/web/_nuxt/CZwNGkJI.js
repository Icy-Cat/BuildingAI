import{u as T,d as N,c as v,o as m,m as e,l as n,bs as P,t as o,_ as F,k as _,C as J,au as K,b as O,aM as X,s as k,aZ as q,w as Y,p as t,F as S,B as D,H as ee,z as te,a_ as z,q as w,j as L,n as se}from"#entry";import ae from"./-aacq5Xj.js";import{_ as oe}from"./EL_6giR3.js";import{_ as ne}from"./Qjq6OWkd.js";import{n as le}from"./BI1JbAYD.js";import{_ as ie}from"./BHGRVy27.js";import{_ as re}from"./DFBCXxNw.js";import{_ as ce}from"./DlAUqK2U.js";import"./BT1VXOqk.js";import"./Dn8X9Gvz.js";import"./BwjX1SxC.js";import"./Bub1HYiY.js";import"./B22A-h4k.js";import"./Bpk8zbrs.js";import"./XpsTG8vq.js";function V(l){return T("/ai-agents",l)}function de(){return T("/agent-decorate")}function ue(l){return T("/tag",l)}const me={class:"mb-3 flex items-start gap-3"},fe={class:"border-default bg-muted flex size-10 flex-none items-center justify-center rounded-lg border"},pe={class:"flex min-w-0 flex-1 flex-col"},_e={class:"text-foreground truncate text-sm font-medium"},ge={class:"text-muted-foreground mt-1 text-xs"},ve={class:"text-muted-foreground h-10 pr-8 text-xs"},he={class:"line-clamp-2 overflow-hidden"},xe={class:"flex items-center justify-between pt-2"},ye={class:"text-muted-foreground flex items-center gap-3"},be={class:"flex items-center gap-1"},ke={class:"text-xs"},we={class:"flex items-center gap-1"},$e={class:"text-xs"},Be=N({__name:"square-card",props:{agent:{},showStats:{type:Boolean,default:!0},variant:{default:"default"}},emits:["click"],setup(l,{emit:i}){const f=l,$=i,B=()=>{$("click",f.agent)};return(s,h)=>{const p=P,g=ie,d=F,x=J,C=re;return m(),v("div",{class:"group bg-muted border-border cursor-pointer rounded-lg border p-4 transition-all duration-200 hover:shadow-md",onClick:B},[e("div",me,[e("div",fe,[n(p,{src:l.agent.avatar,alt:"avatar",class:"size-10 rounded-lg object-contain"},null,8,["src"])]),e("div",pe,[e("h3",_e,o(l.agent.name),1),e("div",ge,[e("span",null,o(s.$t("ai-agent.backend.create.edit")),1),n(g,{datetime:l.agent.updatedAt,mode:"datetime"},null,8,["datetime"])])])]),e("div",ve,[e("p",he,o(l.agent.description),1)]),e("div",xe,[e("div",ye,[e("div",be,[n(d,{name:"i-lucide-message-square-text",class:"size-3"}),e("span",ke,o(l.agent.conversationCount),1)]),e("div",we,[n(d,{name:"i-lucide-users",class:"size-3"}),e("span",$e,o(l.agent.userCount),1)])]),e("div",null,[n(C,{text:l.agent.provider?.name,"delay-duration":0},{default:_(()=>[n(x,{src:l.agent.provider?.iconUrl,class:"size-4"},null,8,["src"])]),_:1},8,["text"])])])])}}}),Ce={class:"relative container mx-auto flex h-full flex-col"},Ie={class:"bg-background sticky top-0 z-10 flex flex-col gap-3 p-4"},qe={class:"flex items-center justify-between"},ze={class:"hidden flex-none font-bold sm:block sm:text-base lg:text-lg"},Te={class:"relative mx-auto flex w-full max-w-3xl justify-center"},Ue={class:"dark:bg-background/30 flex flex-none gap-2 rounded-lg bg-neutral-100 p-1"},je={class:"flex flex-wrap gap-2"},Ae={class:"h-full min-h-0"},Se={class:"flex h-full min-h-0 flex-col"},De={class:"flex flex-col gap-6"},Le={class:"flex flex-col gap-2 pr-10"},Ve={class:"line-clamp-2 font-bold sm:text-2xl sm:text-xl lg:text-4xl"},Ne={class:"text-muted-foreground pr-4 text-base"},Pe={class:"relative flex-none overflow-hidden rounded-lg",style:{width:"520px",height:"280px"}},Fe={class:"absolute right-0 bottom-0 left-0 p-4"},Ge={class:"text-background text-lg font-bold"},Me={class:"text-background text-sm"},Re={key:1,class:"grid grid-cols-1 gap-6 px-4 pt-2 pb-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},We={key:2},Ee={class:"flex h-[70vh] w-full items-center justify-center"},He={class:"flex flex-col items-center gap-3"},Qe={class:"text-muted-foreground"},Ze=N({__name:"index",async setup(l){let i,f;const $=K(),{t:B}=O(),s=X({keyword:"",sortBy:"latest",page:1,pageSize:20}),h=k(!1),p=k(!0),g=k(void 0),d=k([]),x=()=>({keyword:s.keyword,sortBy:s.sortBy,page:s.page,pageSize:s.pageSize,tagIds:g.value?[g.value]:void 0}),{data:C}=([i,f]=q(()=>z("tags",()=>ue(),{transform:a=>[{name:B("ai-agent.frontend.square.recommended"),id:void 0},...a]})),i=await i,f(),i),{data:u}=([i,f]=q(()=>z("agent-decorate",()=>de())),i=await i,f(),i),{data:I,pending:G}=([i,f]=q(()=>z("public-agents-initial",()=>V(x()))),i=await i,f(),i);I.value&&(d.value=I.value.items||[],p.value=I.value.totalPages>(s.page||1));const y=async(a=!1)=>{if(!h.value){h.value=!0,a&&(s.page=1,d.value=[],p.value=!0);try{const r=await V(x());a?d.value=r.items||[]:d.value.push(...r.items||[]),p.value=r.totalPages>(s.page||1)}catch(r){console.error("获取智能体列表失败:",r),p.value=!1}finally{h.value=!1}}},M=async()=>{!p.value||h.value||(s.page=(s.page||1)+1,await y())},U=ee(()=>y(!0),500);Y(()=>s.keyword,U);const j=a=>{s.sortBy=a,y(!0)},R=a=>{g.value=a,y(!0)},W=a=>{a.publishToken&&$.push(`/public/agent/explore/${a.publishToken}`)};return(a,r)=>{const E=F,H=ae,b=te,A=P,Q=oe,Z=ne;return m(),v("div",Ce,[e("div",Ie,[e("div",qe,[e("h2",ze,o(a.$t("ai-agent.frontend.square.square")),1),e("div",Te,[n(H,{modelValue:t(s).keyword,"onUpdate:modelValue":r[0]||(r[0]=c=>t(s).keyword=c),placeholder:a.$t("ai-agent.frontend.square.searchPlaceholder"),class:"sm:w-full lg:w-md",variant:"soft",onInput:t(U)},{leading:_(()=>[n(E,{name:"i-lucide-search"})]),_:1},8,["modelValue","placeholder","onInput"])]),e("div",Ue,[n(b,{color:t(s).sortBy==="latest"?"primary":"neutral",variant:t(s).sortBy==="latest"?"solid":"ghost",onClick:r[1]||(r[1]=c=>j("latest"))},{default:_(()=>[w(o(a.$t("ai-agent.frontend.square.sortByLatest")),1)]),_:1},8,["color","variant"]),n(b,{color:t(s).sortBy==="popular"?"primary":"neutral",variant:t(s).sortBy==="popular"?"solid":"ghost",onClick:r[2]||(r[2]=c=>j("popular"))},{default:_(()=>[w(o(a.$t("ai-agent.frontend.square.sortByPopular")),1)]),_:1},8,["color","variant"])])]),e("div",je,[(m(!0),v(S,null,D(t(C),c=>(m(),L(b,{key:c.id??"recommended",color:t(g)===c.id?"primary":"neutral",variant:t(g)===c.id?"soft":"ghost",class:"px-3 py-1",onClick:Je=>R(c.id)},{default:_(()=>[w(o(c.name),1)]),_:2},1032,["color","variant","onClick"]))),128))])]),e("div",Ae,[e("section",Se,[n(Z,{class:"min-0 h-full"},{default:_(()=>[n(Q,{loading:t(h)||t(G),"has-more":t(p),"no-more-text":t(s).page===1?" ":"",onLoadMore:M},{default:_(()=>[t(u)?.enabled?(m(),v("div",{key:0,class:"flex flex-col items-center justify-between gap-4 px-4 pb-8 lg:flex-row",onClick:r[3]||(r[3]=c=>t(u)?.link&&("navigateToWeb"in a?a.navigateToWeb:t(le))(t(u).link))},[e("div",De,[e("div",Le,[e("h1",Ve,[e("span",null,o(t(u)?.title),1)]),e("p",Ne,[e("span",null,o(t(u)?.description),1)])]),e("div",null,[n(b,{color:"neutral",variant:"solid",size:"xl",class:"rounded-full px-6"},{default:_(()=>[w(o(a.$t("ai-agent.frontend.square.ctaLabel")),1)]),_:1})])]),e("div",Pe,[n(A,{src:t(u)?.heroImageUrl,alt:"square",class:"h-full w-full object-cover"},null,8,["src"]),e("div",Fe,[n(A,{src:t(u)?.overlayIconUrl,class:"mb-3 size-16 rounded-lg"},null,8,["src"]),e("h3",Ge,o(t(u)?.overlayTitle),1),e("p",Me,o(t(u)?.overlayDescription),1)])])])):se("",!0),t(d).length>0?(m(),v("div",Re,[(m(!0),v(S,null,D(t(d),c=>(m(),L(Be,{key:c.id,agent:c,onClick:W},null,8,["agent"]))),128))])):(m(),v("div",We,[e("div",Ee,[e("div",He,[e("span",Qe,o(a.$t("ai-agent.frontend.square.noResults")),1)])])]))]),_:1},8,["loading","has-more","no-more-text"])]),_:1})])])])}}}),ut=ce(Ze,[["__scopeId","data-v-53609276"]]);export{ut as default};

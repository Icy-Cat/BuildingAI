import C from"./-aacq5Xj.js";import{_ as N}from"./Cgx-pZ0i.js";import{d as U,b as q,aq as I,f as g,g as k,w as K,j as M,o as j,k as s,m as c,l as m,p as e,bI as z,v as F,A as h,t as d,z as L,q as w,r as R}from"#entry";import{_ as S}from"./DNZiHWQV.js";import"./DDkKkiq3.js";import"./zPUvkbEL.js";import"./BNqXk1Oe.js";import"./b-_TUx9i.js";import"./B22A-h4k.js";import"./Cfcu-t3n.js";import"./DK1-6_6O.js";import"./CstU5cVH.js";import"./BT1VXOqk.js";import"./CP4Zo7YT.js";import"./XpsTG8vq.js";const T={class:"py-2"},A={class:"text-muted-foreground mt-2 text-xs"},D={class:"flex justify-end gap-2"},re=U({__name:"nickname-modal",props:{currentValue:{},loading:{type:Boolean}},emits:["success"],setup(f,{emit:V}){const u=f,y=V,{t}=q(),x=I(),r=g(!1),n=g(u.currentValue||""),i=k(()=>{const o=n.value.trim();return o?o.length>20?t("user.frontend.profile.nicknameTooLong"):"":t("user.frontend.profile.nicknameRequired")}),p=k(()=>{const o=u.currentValue||"";return n.value.trim()!==o.trim()});K(()=>r.value,o=>{o&&(n.value=u.currentValue||"")});async function _(){if(i.value){x.warning(i.value);return}if(!p.value)return;const o=n.value.trim();y("success",o),r.value=!1}return(o,a)=>{const b=C,B=N,v=L,$=S;return j(),M($,{open:e(r),"onUpdate:open":a[2]||(a[2]=l=>h(r)?r.value=l:null),title:e(t)("user.frontend.profile.editNickname"),width:"sm","show-footer":!0},{trigger:s(()=>[R(o.$slots,"default")]),footer:s(()=>[c("div",D,[m(v,{variant:"soft",onClick:a[1]||(a[1]=l=>r.value=!1)},{default:s(()=>[w(d(e(t)("console-common.cancel")),1)]),_:1}),m(v,{disabled:!e(p)||!!e(i),color:"primary",loading:f.loading,onClick:_},{default:s(()=>[w(d(e(t)("console-common.save")),1)]),_:1},8,["disabled","loading"])])]),default:s(()=>[c("div",T,[m(B,{label:e(t)("user.frontend.profile.nickname"),size:"lg",required:"",error:e(i)},{default:s(()=>[m(b,{modelValue:e(n),"onUpdate:modelValue":a[0]||(a[0]=l=>h(n)?n.value=l:null),placeholder:e(t)("user.frontend.profile.nicknamePlaceholder"),maxlength:"20",ui:{root:"w-full"},onKeydown:z(F(_,["prevent"]),["enter"])},null,8,["modelValue","placeholder","onKeydown"])]),_:1},8,["label","error"]),c("div",A,d(e(t)("user.frontend.profile.nicknameLength")),1)])]),_:3},8,["open","title"])}}});export{re as default};
